<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í≤¨Ï†Å ÏãúÏä§ÌÖú - Í∞úÏÑ†Îêú Î≤ÑÏ†Ñ</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', 'Noto Sans KR', sans-serif;
            background-color: #f9f9f9;
            color: #323130;
            font-size: 14px;
            height: 100vh;
            overflow: hidden;
        }

        /* Grid Í∏∞Î∞ò ÏïàÏ†ïÏ†Å Î†àÏù¥ÏïÑÏõÉ */
        .app-layout {
            height: 100vh;
            width: 100vw;
            display: grid;
            grid-template-columns: 280px 1fr;
            grid-template-rows: 1fr;
            overflow: hidden;
            position: relative;
        }

        /* ÏÇ¨Ïù¥ÎìúÎ∞î */
        .sidebar-container {
            grid-column: 1;
            grid-row: 1;
            height: 100vh;
            display: flex;
            flex-direction: column;
            min-height: 0;
            background: #f9f9f9;
            color: #323130;
            border-right: 1px solid #e5e5e5;
            overflow: hidden;
        }

        .sidebar-header {
            flex: 0 0 auto;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            min-height: 48px;
        }

        .sidebar-scroll {
            flex: 1 1 auto;
            min-height: 0;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 12px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            border-radius: 4px;
            color: #323130;
            text-decoration: none;
            cursor: pointer;
            font-size: 17px;
            font-weight: 500;
            transition: background-color 0.2s ease;
            margin-bottom: 4px;
        }

        .nav-item:hover {
            background: #e1dfdd;
        }

        .nav-item.is-active {
            background: #e1dfdd;
            border-left: 3px solid #0078d4;
            padding-left: 7px;
        }

        /* Î©îÏù∏ ÏΩòÌÖêÏ∏† */
        .main-container {
            grid-column: 2;
            grid-row: 1;
            height: 100vh;
            display: flex;
            flex-direction: column;
            min-width: 0;
            min-height: 0;
            background: #ffffff;
            overflow: hidden;
        }

        .main-content {
            flex: 1 1 auto;
            min-height: 0;
            overflow: auto;
            padding: 20px;
        }

        .estimate-layout {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 20px;
            height: calc(100vh - 40px);
        }

        /* Ï¢åÏ∏° ÏûÖÎ†• ÏòÅÏó≠ */
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow-y: auto;
        }

        .input-section {
            padding: 15px;
            border: 1px solid #e1dfdd;
            border-radius: 4px;
            background: white;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #323130;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .form-row {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px;
        }

        .form-row-horizontal {
            display: flex;
            gap: 8px;
            align-items: end;
            margin-bottom: 8px;
        }

        .form-label {
            font-size: 14px;
            color: #605e5c;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .form-input, .form-select {
            padding: 6px 10px;
            border: 1px solid #d1d1d1;
            border-radius: 2px;
            font-size: 14px;
            background: white;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #0078d4;
        }

        .form-input-small {
            width: 60px;
        }

        .form-select-small {
            width: 80px;
        }

        .btn {
            padding: 6px 12px;
            border: 1px solid #d1d1d1;
            border-radius: 2px;
            background: white;
            color: #323130;
            cursor: pointer;
            font-size: 13px;
        }

        .btn-primary {
            background: #0078d4;
            color: white;
            border-color: #0078d4;
        }

        .btn-primary:hover {
            background: #106ebe;
        }

        .btn:hover {
            background: #f3f2f1;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 12px;
        }

        /* Ïö∞Ï∏° Í≤∞Í≥º ÏòÅÏó≠ */
        .right-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .estimate-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 4px;
        }

        .estimate-title {
            font-size: 16px;
            font-weight: 600;
            color: #323130;
        }

        .estimate-total {
            font-size: 16px;
            font-weight: 600;
            color: #0078d4;
        }

        .estimate-table {
            flex: 1;
            border: 1px solid #e1dfdd;
            border-radius: 4px;
            overflow: hidden;
            min-height: 400px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e1dfdd;
            font-size: 14px;
        }

        th {
            background: #f9f9f9;
            font-weight: 600;
            color: #323130;
        }

        td {
            color: #323130;
        }

        .text-right {
            text-align: right;
        }

        .text-center {
            text-align: center;
        }

        .bottom-buttons {
            display: flex;
            gap: 10px;
        }

        /* Î∂ÑÍ∏∞/Î∂ÄÏÜçÏûêÏû¨ Î¶¨Ïä§Ìä∏ */
        .item-list {
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid #e1dfdd;
            border-radius: 4px;
            background: white;
            margin-top: 8px;
        }

        .item-row {
            padding: 8px 12px;
            border-bottom: 1px solid #f3f2f1;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-row:last-child {
            border-bottom: none;
        }

        .item-row:hover {
            background: #f9f9f9;
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 1200px) {
            .estimate-layout {
                grid-template-columns: 350px 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <!-- ÏÇ¨Ïù¥ÎìúÎ∞î -->
        <aside class="sidebar-container">
            <div class="sidebar-header">
                <span style="font-size: 22px; font-weight: 600;">KIS AI</span>
            </div>
            <div class="sidebar-scroll">
                <div class="nav-item">
                    <span>üìä AI Îß§ÎãàÏ†Ä</span>
                </div>
                <div class="nav-item is-active">
                    <span>üìã Í≤¨Ï†ÅÏÑú</span>
                </div>
                <div class="nav-item">
                    <span>üíº ERP</span>
                </div>
                <div class="nav-item">
                    <span>üìß Ïù¥Î©îÏùº</span>
                </div>
                <div class="nav-item">
                    <span>üìÖ Ï∫òÎ¶∞Îçî</span>
                </div>
                <div class="nav-item">
                    <span>üìê ÎèÑÎ©¥</span>
                </div>
            </div>
        </aside>

        <!-- Î©îÏù∏ ÏòÅÏó≠ -->
        <main class="main-container">
            <div class="main-content">
                <div class="estimate-layout">

                    <!-- Ï¢åÏ∏° ÏûÖÎ†• ÏòÅÏó≠ -->
                    <div class="left-panel">

                        <!-- Í≥†Í∞ù Ï†ïÎ≥¥ -->
                        <div class="input-section">
                            <div class="section-title">Í≥†Í∞ù Ï†ïÎ≥¥</div>
                            <div class="form-row">
                                <label class="form-label">ÏóÖÏ≤¥Î™Ö</label>
                                <input type="text" class="form-input" placeholder="ÏóÖÏ≤¥Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                            </div>
                            <div class="form-grid">
                                <div class="form-row">
                                    <label class="form-label">Ïó∞ÎùΩÏ≤ò</label>
                                    <input type="text" class="form-input" placeholder="Ïó∞ÎùΩÏ≤ò">
                                </div>
                                <div class="form-row">
                                    <label class="form-label">Ïù¥Î©îÏùº</label>
                                    <input type="email" class="form-input" placeholder="Ïù¥Î©îÏùº">
                                </div>
                            </div>
                        </div>

                        <!-- Ïô∏Ìï® Ï†ïÎ≥¥ (2Ïó¥ 2Ìñâ) -->
                        <div class="input-section">
                            <div class="section-title">Ïô∏Ìï®</div>
                            <div class="form-grid">
                                <div class="form-row">
                                    <label class="form-label">ÏÑ§Ïπò</label>
                                    <select class="form-select">
                                        <option>Ïò•ÎÇ¥</option>
                                        <option>Ïò•Ïô∏</option>
                                        <option>Ïò•ÎÇ¥ÏûêÎ¶Ω</option>
                                        <option>Ïò•Ïô∏ÏûêÎ¶Ω</option>
                                        <option>Ï†ÑÏ£ºÎ∂ÄÏ∞©Ìòï</option>
                                    </select>
                                </div>
                                <div class="form-row">
                                    <label class="form-label">Ìï®Ï¢ÖÎ•ò</label>
                                    <select class="form-select">
                                        <option>Í∏∞ÏÑ±Ìï®</option>
                                        <option>Ï£ºÎ¨∏Ï†úÏûëÌï®</option>
                                        <option>Í≥ÑÎüâÍ∏∞Ìï®</option>
                                        <option>CTÍ≥ÑÎüâÍ∏∞Ìï®</option>
                                        <option>FRP Î∞ïÏä§</option>
                                        <option>ÌïòÏù¥Î∞ïÏä§</option>
                                    </select>
                                </div>
                                <div class="form-row">
                                    <label class="form-label">Ïû¨Ïßà</label>
                                    <select class="form-select">
                                        <option>STEEL 1.6T</option>
                                        <option>STEEL 1.0T</option>
                                        <option>STEEL 2.0T</option>
                                        <option>SUS201 1.0T</option>
                                        <option>SUS201 1.2T</option>
                                        <option>SUS201 1.5T</option>
                                        <option>SUS304 1.2T</option>
                                        <option>SUS304 1.5T</option>
                                        <option>SUS304 2.0T</option>
                                    </select>
                                </div>
                                <div class="form-row">
                                    <label class="form-label">ÌîºÏª§Î≤Ñ</label>
                                    <select class="form-select">
                                        <option>ÏïÑÌÅ¨Î¶¥</option>
                                        <option>STEEL 1.6T</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Ï∞®Îã®Í∏∞ ÏÑ§Ï†ï -->
                        <div class="input-section">
                            <div class="section-title">Ï∞®Îã®Í∏∞ ÏÑ§Ï†ï</div>
                            <div class="form-grid">
                                <div class="form-row">
                                    <label class="form-label">Î∏åÎûúÎìú</label>
                                    <select class="form-select">
                                        <option>ÏÉÅÎèÑÏ∞®Îã®Í∏∞</option>
                                        <option>LSÏ∞®Îã®Í∏∞</option>
                                        <option>ÎåÄÎ•ôÏ∞®Îã®Í∏∞</option>
                                        <option>ÎπÑÏ∏†Î°úÏ∞®Îã®Í∏∞</option>
                                    </select>
                                </div>
                                <div class="form-row">
                                    <label class="form-label">Ï¢ÖÎ•ò</label>
                                    <select class="form-select">
                                        <option>ÌëúÏ§ÄÌòï</option>
                                        <option>Í≤ΩÏ†úÌòï</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Î©îÏù∏ Ï∞®Îã®Í∏∞ (Ïª¥Ìå©Ìä∏) -->
                        <div class="input-section">
                            <div class="section-title">Î©îÏù∏ Ï∞®Îã®Í∏∞</div>
                            <div class="form-row-horizontal">
                                <div style="flex: 1;">
                                    <label class="form-label">Ï¢ÖÎ•ò</label>
                                    <select class="form-select form-select-small">
                                        <option>MCCB</option>
                                        <option>ELB</option>
                                    </select>
                                </div>
                                <div style="flex: 1;">
                                    <label class="form-label">Í∑πÏàò</label>
                                    <select class="form-select form-select-small">
                                        <option>4P</option>
                                        <option>3P</option>
                                        <option>2P</option>
                                    </select>
                                </div>
                                <div style="flex: 1;">
                                    <label class="form-label">Ïö©Îüâ</label>
                                    <select class="form-select form-select-small">
                                        <option>100A</option>
                                        <option>125A</option>
                                        <option>150A</option>
                                        <option>200A</option>
                                        <option>250A</option>
                                        <option>300A</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="form-label">ÏàòÎüâ</label>
                                    <input type="number" class="form-input form-input-small" value="1" min="1">
                                </div>
                            </div>
                        </div>

                        <!-- Î∂ÑÍ∏∞ Ï∞®Îã®Í∏∞ -->
                        <div class="input-section">
                            <div class="section-title">Î∂ÑÍ∏∞ Ï∞®Îã®Í∏∞</div>
                            <div id="branch-inputs">
                                <div class="form-row-horizontal branch-row">
                                    <div style="flex: 1;">
                                        <label class="form-label">Ï¢ÖÎ•ò</label>
                                        <select class="form-select form-select-small branch-type">
                                            <option>MCCB</option>
                                            <option>ELB</option>
                                        </select>
                                    </div>
                                    <div style="flex: 1;">
                                        <label class="form-label">Í∑πÏàò</label>
                                        <select class="form-select form-select-small branch-poles">
                                            <option>2P</option>
                                            <option>3P</option>
                                            <option>4P</option>
                                        </select>
                                    </div>
                                    <div style="flex: 1;">
                                        <label class="form-label">Ïö©Îüâ</label>
                                        <select class="form-select form-select-small branch-capacity">
                                            <option>15A</option>
                                            <option>20A</option>
                                            <option>30A</option>
                                            <option>40A</option>
                                            <option>50A</option>
                                            <option>60A</option>
                                            <option>75A</option>
                                            <option>100A</option>
                                            <option>125A</option>
                                            <option>150A</option>
                                            <option>175A</option>
                                            <option>200A</option>
                                            <option>225A</option>
                                            <option>250A</option>
                                            <option>300A</option>
                                            <option>400A</option>
                                            <option>600A</option>
                                            <option>800A</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="form-label">ÏàòÎüâ</label>
                                        <input type="number" class="form-input form-input-small branch-qty" value="1" min="1">
                                    </div>
                                    <div>
                                        <label class="form-label" style="visibility: hidden;">ÏÇ≠Ï†ú</label>
                                        <button class="btn btn-small remove-branch" style="display: none;">ÏÇ≠Ï†ú</button>
                                    </div>
                                </div>
                            </div>

                            <div class="item-list" id="branch-list">
                                <!-- Î∂ÑÍ∏∞ Ï∞®Îã®Í∏∞ Î™©Î°ùÏù¥ Ïó¨Í∏∞ ÌëúÏãú -->
                            </div>
                        </div>

                        <!-- Î∂ÄÏÜçÏûêÏû¨ -->
                        <div class="input-section">
                            <div class="section-title">Î∂ÄÏÜçÏûêÏû¨</div>
                            <div class="form-row-horizontal">
                                <div style="flex: 1;">
                                    <label class="form-label">ÎßàÍ∑∏ÎÑ§Ìä∏</label>
                                    <select class="form-select" id="magnet-type">
                                        <option>MC-22</option>
                                        <option>MC-32</option>
                                        <option>MC-40</option>
                                        <option>MC-50</option>
                                        <option>MC-65</option>
                                        <option>MC-75</option>
                                        <option>MC-80</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="form-label">ÏàòÎüâ</label>
                                    <input type="number" class="form-input form-input-small" id="magnet-qty" value="1" min="1">
                                </div>
                                <div>
                                    <label class="form-label" style="visibility: hidden;">Ï∂îÍ∞Ä</label>
                                    <button class="btn btn-primary" onclick="addAccessory()">Ï∂îÍ∞Ä</button>
                                </div>
                            </div>

                            <div class="item-list" id="accessory-list">
                                <!-- Î∂ÄÏÜçÏûêÏû¨ Î™©Î°ùÏù¥ Ïó¨Í∏∞ ÌëúÏãú -->
                            </div>
                        </div>

                    </div>

                    <!-- Ïö∞Ï∏° Í≤∞Í≥º ÏòÅÏó≠ -->
                    <div class="right-panel">

                        <!-- Í≤¨Ï†Å Ï†úÎ™© Î∞è Ìï©Í≥Ñ -->
                        <div class="estimate-header">
                            <div class="estimate-title" id="estimate-title">(Í≤¨Ï†Å ÏóÜÏùå)</div>
                            <div class="estimate-total" id="estimate-total">Ìï©Í≥Ñ: 0 Ïõê</div>
                        </div>

                        <!-- Í≤¨Ï†Å ÌÖåÏù¥Î∏î -->
                        <div class="estimate-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width: 50px;">No</th>
                                        <th style="width: 200px;">ÌíàÎ™Ö</th>
                                        <th style="width: 200px;">Í∑úÍ≤©</th>
                                        <th class="text-center" style="width: 60px;">Îã®ÏúÑ</th>
                                        <th class="text-center" style="width: 70px;">ÏàòÎüâ</th>
                                        <th class="text-right" style="width: 100px;">Îã®Í∞Ä</th>
                                        <th class="text-right" style="width: 120px;">Í∏àÏï°</th>
                                    </tr>
                                </thead>
                                <tbody id="estimate-tbody">
                                    <!-- Í≤¨Ï†Å Îç∞Ïù¥ÌÑ∞Í∞Ä Ïó¨Í∏∞ ÌëúÏãú -->
                                </tbody>
                            </table>
                        </div>

                        <!-- ÌïòÎã® Î≤ÑÌäº -->
                        <div class="bottom-buttons">
                            <button class="btn btn-primary" onclick="generateEstimate()">Í≤¨Ï†Å ÏÉùÏÑ±</button>
                            <button class="btn btn-primary">ÏóëÏÖÄ Ï†ÄÏû•(ÌöåÏÇ¨ ÏñëÏãù)</button>
                            <button class="btn">CSV Ï†ÄÏû•</button>
                            <button class="btn" onclick="clearAll()">ÌôîÎ©¥ ÏßÄÏö∞Í∏∞</button>
                        </div>

                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let branches = [];
        let accessories = [];

        // Î∂ÑÍ∏∞ Ï∞®Îã®Í∏∞ ÏÑ†ÌÉù ÏôÑÎ£åÏãú ÏûêÎèô Ï∂îÍ∞Ä
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('branch-type') ||
                e.target.classList.contains('branch-poles') ||
                e.target.classList.contains('branch-capacity') ||
                e.target.classList.contains('branch-qty')) {

                const row = e.target.closest('.branch-row');
                const type = row.querySelector('.branch-type').value;
                const poles = row.querySelector('.branch-poles').value;
                const capacity = row.querySelector('.branch-capacity').value;
                const qty = row.querySelector('.branch-qty').value;

                if (type && poles && capacity && qty) {
                    addBranch(type, poles, capacity, qty);
                    addNewBranchRow();
                }
            }
        });

        function addBranch(type, poles, capacity, qty) {
            branches.push({type, poles, capacity, qty});
            updateBranchList();
        }

        function addNewBranchRow() {
            const branchInputs = document.getElementById('branch-inputs');
            const newRow = document.createElement('div');
            newRow.className = 'form-row-horizontal branch-row';
            newRow.innerHTML = `
                <div style="flex: 1;">
                    <label class="form-label">Ï¢ÖÎ•ò</label>
                    <select class="form-select form-select-small branch-type">
                        <option>MCCB</option>
                        <option>ELB</option>
                    </select>
                </div>
                <div style="flex: 1;">
                    <label class="form-label">Í∑πÏàò</label>
                    <select class="form-select form-select-small branch-poles">
                        <option>2P</option>
                        <option>3P</option>
                        <option>4P</option>
                    </select>
                </div>
                <div style="flex: 1;">
                    <label class="form-label">Ïö©Îüâ</label>
                    <select class="form-select form-select-small branch-capacity">
                        <option>15A</option>
                        <option>20A</option>
                        <option>30A</option>
                        <option>40A</option>
                        <option>50A</option>
                        <option>60A</option>
                        <option>75A</option>
                        <option>100A</option>
                        <option>125A</option>
                        <option>150A</option>
                        <option>175A</option>
                        <option>200A</option>
                        <option>225A</option>
                        <option>250A</option>
                        <option>300A</option>
                        <option>400A</option>
                        <option>600A</option>
                        <option>800A</option>
                    </select>
                </div>
                <div>
                    <label class="form-label">ÏàòÎüâ</label>
                    <input type="number" class="form-input form-input-small branch-qty" value="1" min="1">
                </div>
                <div>
                    <label class="form-label" style="visibility: hidden;">ÏÇ≠Ï†ú</label>
                    <button class="btn btn-small remove-branch" onclick="removeBranchRow(this)">ÏÇ≠Ï†ú</button>
                </div>
            `;
            branchInputs.appendChild(newRow);

            // Ïù¥Ï†Ñ ÌñâÏùò ÏÇ≠Ï†ú Î≤ÑÌäº ÌëúÏãú
            const prevRows = branchInputs.querySelectorAll('.branch-row');
            if (prevRows.length > 1) {
                prevRows[prevRows.length - 2].querySelector('.remove-branch').style.display = 'block';
            }
        }

        function removeBranchRow(btn) {
            btn.closest('.branch-row').remove();
        }

        function updateBranchList() {
            const list = document.getElementById('branch-list');
            list.innerHTML = '';
            branches.forEach((branch, index) => {
                const item = document.createElement('div');
                item.className = 'item-row';
                item.innerHTML = `
                    <span>${branch.type} | ${branch.poles} ${branch.capacity} | ÏàòÎüâ ${branch.qty}</span>
                    <button class="btn btn-small" onclick="removeBranch(${index})">ÏÇ≠Ï†ú</button>
                `;
                list.appendChild(item);
            });
        }

        function removeBranch(index) {
            branches.splice(index, 1);
            updateBranchList();
        }

        function addAccessory() {
            const type = document.getElementById('magnet-type').value;
            const qty = document.getElementById('magnet-qty').value;
            accessories.push({name: `ÎßàÍ∑∏ÎÑ§Ìä∏ ${type}`, qty: parseInt(qty)});
            updateAccessoryList();
            document.getElementById('magnet-qty').value = '1';
        }

        function updateAccessoryList() {
            const list = document.getElementById('accessory-list');
            list.innerHTML = '';
            accessories.forEach((acc, index) => {
                const item = document.createElement('div');
                item.className = 'item-row';
                item.innerHTML = `
                    <span>${acc.name} x ${acc.qty}</span>
                    <button class="btn btn-small" onclick="removeAccessory(${index})">ÏÇ≠Ï†ú</button>
                `;
                list.appendChild(item);
            });
        }

        function removeAccessory(index) {
            accessories.splice(index, 1);
            updateAccessoryList();
        }

        function generateEstimate() {
            // Í≤¨Ï†Å ÏÉùÏÑ± Î°úÏßÅ
            const lines = [];
            let no = 1;

            // Ïô∏Ìï®
            lines.push({
                no: no++,
                name: 'Î∞∞Ï†ÑÎ∞òÌï®Ï≤¥',
                spec: 'STEEL 1.6T Ïò•ÎÇ¥Ïö©',
                unit: 'EA',
                qty: 1,
                price: 150000,
                amount: 150000
            });

            // Î©îÏù∏ Ï∞®Îã®Í∏∞
            lines.push({
                no: no++,
                name: 'Î©îÏù∏ Ï∞®Îã®Í∏∞ MCCB',
                spec: '4P 100A',
                unit: 'EA',
                qty: 1,
                price: 80000,
                amount: 80000
            });

            // Î∂ÑÍ∏∞ Ï∞®Îã®Í∏∞
            branches.forEach(branch => {
                lines.push({
                    no: no++,
                    name: `Î∂ÑÍ∏∞ Ï∞®Îã®Í∏∞ ${branch.type}`,
                    spec: `${branch.poles} ${branch.capacity}`,
                    unit: 'EA',
                    qty: parseInt(branch.qty),
                    price: 25000,
                    amount: 25000 * parseInt(branch.qty)
                });
            });

            // Î∂ÄÏÜçÏûêÏû¨
            accessories.forEach(acc => {
                lines.push({
                    no: no++,
                    name: acc.name,
                    spec: '',
                    unit: 'EA',
                    qty: acc.qty,
                    price: 15000,
                    amount: 15000 * acc.qty
                });
            });

            updateEstimateTable(lines);
        }

        function updateEstimateTable(lines) {
            const tbody = document.getElementById('estimate-tbody');
            tbody.innerHTML = '';
            let total = 0;

            lines.forEach(line => {
                total += line.amount;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="text-center">${line.no}</td>
                    <td>${line.name}</td>
                    <td>${line.spec}</td>
                    <td class="text-center">${line.unit}</td>
                    <td class="text-center">${line.qty}</td>
                    <td class="text-right">${line.price.toLocaleString()}Ïõê</td>
                    <td class="text-right">${line.amount.toLocaleString()}Ïõê</td>
                `;
                tbody.appendChild(row);
            });

            document.getElementById('estimate-title').textContent =
                `Î∞∞Ï†ÑÎ∞ò Í≤¨Ï†Å | Î©îÏù∏ MCCB 4P 100A | Î∂ÑÍ∏∞ ${branches.length}Í∞ú`;
            document.getElementById('estimate-total').textContent =
                `Ìï©Í≥Ñ: ${total.toLocaleString()} Ïõê`;
        }

        function clearAll() {
            branches = [];
            accessories = [];
            updateBranchList();
            updateAccessoryList();
            document.getElementById('estimate-tbody').innerHTML = '';
            document.getElementById('estimate-title').textContent = '(Í≤¨Ï†Å ÏóÜÏùå)';
            document.getElementById('estimate-total').textContent = 'Ìï©Í≥Ñ: 0 Ïõê';
        }
    </script>
</body>
</html>